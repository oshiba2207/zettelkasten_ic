(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{125:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),i=n.n(c),s=n(24),o=n.n(s),r=n(8),l=(n(114),n(64)),j=n(105),u=n(63),d=n(32),b=n(35),h=n(16),f=n(17);var O=function(e){var t=e.tags,n=(e.setFilteredItems,e.getNotes),s=e.pfad,o=e.appUser,l=Object(c.useState)(t),j=Object(r.a)(l,2),u=j[0],O=j[1],g=Object(c.useState)(!1),p=Object(r.a)(g,2),m=p[0],x=p[1],v=Object(c.useState)(""),y=Object(r.a)(v,2),S=y[0],C=y[1],N=Object(c.useState)(""),T=Object(r.a)(N,2),w=T[0],k=T[1],F=Object(c.useState)(""),I=Object(r.a)(F,2),L=I[0],E=I[1],J=function(){return x(!1)};return i.a.useEffect((function(){O(t)}),[t],[u]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{variant:"primary",onClick:function(){return x(!0)},children:"New Note"}),Object(a.jsxs)(f.a,{show:m,onHide:J,children:[Object(a.jsx)(f.a.Header,{children:Object(a.jsx)(d.a,{inline:!0,children:Object(a.jsx)(b.a,{type:"text",placeholder:"Note Title",className:"mr-sm-2",value:S,onChange:function(e){return C(e.target.value)}})})}),Object(a.jsxs)(f.a.Body,{children:[Object(a.jsx)(d.a,{children:Object(a.jsx)("textarea",{rows:10,cols:40,placeholder:"Note Text",className:"mr-sm-2",value:w,onChange:function(e){e.preventDefault(),k(e.target.value)}})}),Object(a.jsxs)("select",{onChange:function(e){return E(e.target.value)},children:[Object(a.jsx)("option",{value:"",children:"Select Tag"},""),u.map((function(e){return Object(a.jsxs)("option",{value:e.tagid,children:["#",e.tagname]},e.tagid)}))]})]}),Object(a.jsxs)(f.a.Footer,{children:[Object(a.jsx)(h.a,{variant:"secondary",onClick:J,children:"Close"}),Object(a.jsx)(h.a,{variant:"primary",onClick:function(e){C(S),k(w),E(L),fetch(s+":3001/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noteName:S,noteText:w,tag:L,appUser:o})}).then((function(e){n(),x(!1)})).then(x(!1))},children:"Save Note"}),Object(a.jsx)(h.a,{variant:"primary",onClick:function(e){!function(e){fetch(s+":3001/addTag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:e,noteName:S})}).then((function(e){n()}))}(L)},children:"Add another tag"})]})]})]})},g=n(20),p=function(e){var t=e.tags,n=e.getNotes,s=e.load,o=e.setLoad,p=e.items,m=e.setFilteredItems,x=e.hashtags,v=e.pfad,y=e.appUser,S=Object(c.useState)(""),C=Object(r.a)(S,2),N=C[0],T=C[1],w=Object(c.useState)(!1),k=Object(r.a)(w,2),F=k[0],I=k[1],L=Object(c.useState)(""),E=Object(r.a)(L,2),J=E[0],U=E[1],A=Object(c.useState)(t),P=Object(r.a)(A,2),B=P[0],H=P[1],z=Object(c.useState)(""),D=Object(r.a)(z,2),W=D[0],R=D[1],_=function(){return I(!1)},q=Object(g.b)(),G=(q.user,q.isAuthenticated);Object(c.useEffect)((function(){n(y)}),[]),i.a.useEffect((function(){H(t)}),[t],[B]),Object(c.useEffect)((function(){m(p.filter((function(e){return e.notetext.toLowerCase().includes(N.toLowerCase())||e.notename.toLowerCase().includes(N.toLowerCase())})))}),[N]),Object(c.useEffect)((function(){m(Y(W))}),[W]);var Y=function(e){return x.filter((function(t){return t.tagname.toLowerCase().includes(e.toLowerCase())}))},Z=function(e){R(e.target.text.substring(1)),s||o(!0)};return G&&Object(a.jsxs)(l.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(l.a.Brand,{href:"#home",children:"Zettelkasten"}),Object(a.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(l.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(j.a,{className:"mr-auto",children:[Object(a.jsx)(O,{appUser:y,tags:t,setFilteredItems:m,getNotes:n,pfad:v}),Object(a.jsxs)(u.a,{title:"Tags",id:"basic-nav-dropdown",children:[B.map((function(e){return Object(a.jsxs)(u.a.Item,{value:e.tagid,onClick:Z,children:["#",e.tagname]},e.tagid)})),Object(a.jsx)(u.a.Divider,{}),Object(a.jsx)(u.a.Item,{href:"#action/3.4",onClick:function(){return I(!0)},children:"New Tag"}),Object(a.jsxs)(f.a,{show:F,onHide:_,children:[Object(a.jsx)(f.a.Header,{children:Object(a.jsx)(d.a,{inline:!0,children:Object(a.jsx)(b.a,{type:"text",placeholder:"new Tag",value:J,onChange:function(e){return U(e.target.value)}})})}),Object(a.jsxs)(f.a.Footer,{children:[Object(a.jsx)(h.a,{variant:"secondary",onClick:_,children:"Close"}),Object(a.jsx)(h.a,{variant:"primary",onClick:function(){fetch(v+":3001/newTag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({neuesTag:J})}).then((function(e){return e.text()})).then((function(e){fetch(v+":3001/tags").then((function(e){return e.json()})).then((function(e){H(e)}))}))},children:"Save new Tag"})]})]})]}),Object(a.jsx)(h.a,{onClick:function(){o(!s),console.log(s)},children:"Show all"})]}),Object(a.jsx)(d.a,{inline:!0,children:Object(a.jsx)(b.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:function(e){T(e.target.value),s||o(!0)},value:N})})]})]})},m=(n(125),n(29)),x=function(e){var t=e.hashtag,n=Object(c.useState)(""),i=Object(r.a)(n,2),s=(i[0],i[1]);return Object(a.jsx)("div",{className:"hashTag",children:Object(a.jsxs)("small",{onClick:function(){console.log(t.tagname),s(t.tagname)},children:["#",t.tagname]})})},v=n(62),y=n(78),S=n.n(y);var C=function(e){var t=e.tags,n=(e.setFilteredItems,e.getNotes),s=e.item,o=e.pfad,l=Object(c.useState)(t),j=Object(r.a)(l,2),u=j[0],b=j[1],O=Object(c.useState)(!1),g=Object(r.a)(O,2),p=g[0],m=g[1],x=Object(c.useState)(s.notename),y=Object(r.a)(x,2),C=y[0],N=y[1],T=Object(c.useState)(s.notetext),w=Object(r.a)(T,2),k=w[0],F=w[1],I=Object(c.useState)(""),L=Object(r.a)(I,2),E=L[0],J=L[1],U=Object(c.useState)(s.noteid),A=Object(r.a)(U,2),P=A[0],B=(A[1],Object(c.useState)()),H=Object(r.a)(B,2),z=H[0],D=H[1],W=Object(c.useState)(""),R=Object(r.a)(W,2),_=R[0],q=R[1],G=function(){return m(!1)};i.a.useEffect((function(){b(t)}),[t],[u]);var Y=function(e){var t=e.target.files[0],n="";return t.size>3e4&&(n=t.type+"is too large, please pick a smaller file\n",v.a.error(n)),!0};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{size:"sm",variant:"primary",onClick:function(){return m(!0)},children:"Edit"}),Object(a.jsxs)(f.a,{show:p,onHide:G,children:[Object(a.jsx)(f.a.Header,{children:Object(a.jsx)(d.a,{inline:!0,children:Object(a.jsx)("input",{type:"text",value:C,className:"mr-sm-2",onChange:function(e){return N(e.target.value)}})})}),Object(a.jsxs)(f.a.Body,{children:[Object(a.jsx)(d.a,{children:Object(a.jsx)("textarea",{rows:10,cols:35,className:"mr-sm-2",value:k,onChange:function(e){return F(e.target.value)}})}),Object(a.jsxs)("select",{onChange:function(e){return J(e.target.value)},children:[Object(a.jsx)("option",{value:"",children:"Select Tag"},""),u.map((function(e){return Object(a.jsxs)("option",{value:e.tagid,children:["#",e.tagname]},e.tagid)})),Object(a.jsx)("option",{value:"0",onClick:function(){var e=prompt("Enter new Tag:");fetch(o+":3001/newTag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({neuesTag:e})}).then((function(e){return e.text()})).then((function(e){fetch(o+":3001/tags").then((function(e){return e.json()})).then((function(e){b(e)}))}))},children:"Create new tag"},"0")]}),Object(a.jsxs)("form",{method:"post",action:"#",id:"#",children:[Object(a.jsxs)("div",{className:"form-group files",children:[Object(a.jsx)("label",{children:"Upload Your File "}),Object(a.jsx)("input",{type:"file",name:"file",className:"form-control",onChange:function(e){var t=e.target.files[0];q(t.name),console.log(t),Y(e)&&D(t)}})]}),Object(a.jsx)("div",{className:"col-md-6 pull-right",children:Object(a.jsx)("button",{width:"100%",type:"button",className:"btn btn-info",onClick:function(){var e=new FormData;console.log(z),e.append("file",z),e.append("noteid",P),console.log(e),S.a.post(o+":3001/upload",e).then((function(e){v.a.success("upload success")})).then((function(e){fetch(o+":3001/uploads/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:_,noteid:P})})})).then((function(e){fetch(o+":3001/upload_ipfs/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:_,noteid:P})})})).catch((function(e){v.a.error("upload fail")}))},children:"Upload File"})})]})]}),Object(a.jsxs)(f.a.Footer,{children:[Object(a.jsx)(h.a,{variant:"secondary",onClick:G,children:"Close"}),Object(a.jsx)(h.a,{variant:"primary",onClick:function(e){N(C),F(k),J(E),fetch(o+":3001/changeNote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noteName:C,noteText:k,noteid:P})}).then((function(e){n()}))},children:"Save Changes"}),Object(a.jsx)(h.a,{variant:"primary",onClick:function(e){!function(e,t){fetch(o+":3001/addTag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:e,noteid:t})}).then((function(e){n()}))}(E,P)},children:"Add another tag"})]})]})]})};var N=n(156),T=n(157),w=n(160),k=function(e){var t=e.item,n=e.hashtags,i=e.tags,s=e.getNotes,o=(e.setFilteredItems,e.filterByTagNote),l=e.pfad,j=Object(c.useState)(t.noteid),u=Object(r.a)(j,2),d=u[0],b=(u[1],Object(m.a)(n)),f=Object(c.useState)("https://storageapi.fleek.co/oshiba2207-team-bucket/"+t.ipfshash),O=Object(r.a)(f,2),g=O[0],p=(O[1],b.filter((function(e){return e.noteid===t.noteid}))),v=function(e){fetch(l+":3001/deleteNote/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({noteid:e})}).then((function(e){s()}))};return Object(a.jsx)(N.a,{w:"100%",alignItems:"flex-start",children:Object(a.jsxs)(T.a,{bg:"gray.100",p:4,rounded:"md",w:"100%",children:[Object(a.jsx)(w.a,{fontSize:"3xl",fontWeight:"extrabold",children:t.notename}),Object(a.jsx)(w.a,{children:t.notetext}),Object(a.jsx)("a",{href:g,target:"_blank",children:Object(a.jsx)("img",{src:g,loading:"lazy",alt:""})}),Object(a.jsx)(C,{tags:i,item:t,getNotes:s,pfad:l}),Object(a.jsx)(h.a,{size:"sm",style:{margin:10},variant:"danger",onClick:function(e){v(d)},value:t.noteid,children:"Del"}),p.map((function(e,t){return Object(a.jsx)(x,{hashtag:p[t],filterByTagNote:o},e.linkid)}))]})},t.noteid)},F=n(158),I=function(e){var t=e.items,n=e.hashtags,c=e.tags,i=e.getNotes,s=e.setFilteredItems,o=e.pfad,r=Object(g.b)(),l=(r.user,r.isAuthenticated),j=function(e){return n.filter((function(t){return t.tagname.toLowerCase().includes(e.toLowerCase())}))};return l&&Object(a.jsx)(F.a,{maxW:"md",centerContent:!0,p:8,children:Object(a.jsx)(N.b,{spacing:8,w:"100%",children:t.map((function(e){return Object(a.jsx)(k,{item:e,hashtags:n,tags:c,pfad:o,filterByTagNote:j,setFilteredItems:s,getNotes:i},e.noteid)}))})})},L=function(e){var t=e.setAppUser,n=Object(g.b)(),c=n.user,i=n.loginWithRedirect,s=n.isAuthenticated;return s&&t(c.sub),!s&&Object(a.jsx)("button",{onClick:function(){return i()},children:"Log In"})},E=function(){var e=Object(g.b)(),t=e.logout;return e.isAuthenticated&&Object(a.jsx)("button",{onClick:function(){return t()},children:"Log Out"})};var J=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),o=Object(r.a)(s,2),l=o[0],j=o[1],u=Object(c.useState)([]),d=Object(r.a)(u,2),b=d[0],h=(d[1],Object(c.useState)([])),f=Object(r.a)(h,2),O=f[0],m=f[1],x=Object(c.useState)([]),v=Object(r.a)(x,2),y=v[0],S=v[1],C=Object(c.useState)("google-oauth2|116340653218718203379"),N=Object(r.a)(C,2),T=N[0],w=N[1],k="https://www.simian.link",F=Object(c.useState)(!1),J=Object(r.a)(F,2),U=J[0],A=J[1],P=(Object(g.b)().isAuthenticated,function(){fetch(k+":3001",{method:"POST",body:JSON.stringify({appUser:T}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){S(e);var t=B(e,"noteid");m(t),i(t)}))}),B=function(e,t){return e.map((function(e){return e[t]})).map((function(e,t,n){return n.indexOf(e)===t&&t})).filter((function(t){return e[t]})).map((function(t){return e[t]}))};return Object(c.useEffect)((function(){fetch(k+":3001/tags").then((function(e){return e.json()})).then((function(e){j(e)}))}),[b]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(L,{setAppUser:w}),Object(a.jsx)(E,{}),Object(a.jsx)(p,{appUser:T,pfad:k,load:U,setLoad:A,tags:l,filteredItems:O,reloadItems:P,items:n,setFilteredItems:m,getNotes:P,hashtags:y}),Object(a.jsx)(I,{pfad:k,className:"NoteGrid",getNotes:P,items:O,setFilteredItems:m,hashtags:y,tags:l})]})},U=n(159);o.a.render(Object(a.jsx)(g.a,{domain:"dev-xrqyheme.eu.auth0.com",clientId:"fLN6d5cB4piL9388kH6flyWl06gzRv0t",redirectUri:window.location.origin,children:Object(a.jsx)(U.a,{children:Object(a.jsx)(J,{})})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.65fda77b.chunk.js.map